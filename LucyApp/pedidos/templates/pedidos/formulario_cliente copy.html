<!-- pedidos/templates/pedidos/formulario_cliente.html -->
{% load static %}
<!DOCTYPE html>
<html>
<head>
    <title>Datos del Cliente</title>
    <link rel="stylesheet" href="{% static 'css/estilos.css' %}">
</head>
<body>
    <h1>Completar Datos del Cliente</h1>
    
    <form method="POST" action="{% url 'enviar_pedido' %}">
        {% csrf_token %}
        
        <label for="nombre">Nombre Completo:</label>
        <input type="text" id="nombre" name="nombre_completo" required>
        
        <label for="email">Email:</label>
        <input type="email" id="email" name="email" required>
        
        <label for="telefono">Teléfono:</label>
        <input type="text" id="telefono" name="telefono" required>
        
        <label for="senia">Seña ($):</label>
        <input type="number" id="senia" name="senia" min="0" value="0" step="0.01">
        
        <input type="hidden" name="carrito" id="carrito-data">
        
        <button type="submit">Finalizar Pedido</button>
    </form>

    <script>
        // Recuperar carrito de sessionStorage
        const carrito = sessionStorage.getItem('carrito');
        document.getElementById('carrito-data').value = carrito;
        document.querySelector('form').addEventListener('submit', function(e) {
        const carrito = JSON.parse(sessionStorage.getItem('carrito') || '{}');
        if (Object.keys(carrito).length === 0) {
            e.preventDefault();
            alert('¡El carrito está vacío!');
        }
    });
    </script>
</body>
</html>